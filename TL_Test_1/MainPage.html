<!DOCTYPE html>
<html style="height: 100%; margin: 0;" oncontextmenu="return false;">
<head>
<title>Speed Type</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
.StartButton {
    position: absolute;
    text-align: center;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    line-height: 31px;
    font-family: Arial;
    background-color: #FFFF00;
    width: 100px;
    height: 30px;
    border: 2px solid #000000;
    user-select: none;
    cursor: pointer;
}

.StartButton:hover {
    background-color: #DDDD00;
}

.Hide {
    display: none;
}
</style>
</head>
<body style="height: 100%; margin: 0;">
<audio id="MainAudio" ontimeupdate="CheckTime()">
<source src="https://nicogamer3000.github.io/TestMain/TL_Test_1/PageMusic.mp3" type="audio/mp3">
</audio>
<div id="Background" style='position: absolute; transition-property: opacity; transition-duration: 1s; height: 100%; width: 100%; background-image: url("https://nicogamer3000.github.io/TestMain/TL_Test_1/KeyboardGIF.gif"); background-size: cover; background-repeat: no-repeat; background-position: center; opacity: 0; z-index: -1'></div>
<div id="StartButton" class="StartButton" onclick="Initialize()">START</div>
<div id="TitleText" class="Hide" style="position: relative; font-family: Arial; font-weight: bold; text-align: center; color: #000000; top: 10px; transition-property: color; transition-duration: 1s;">Type the text below as fast as possible</div>
<p class="Hide" id="MainText" style="font-family: Arial; text-align: center; color: #000000; user-select: none; transition-property: color; transition-duration: 1s;">The foreign country was besieged by a group of soldiers which were equipped with various firearms and melee weapons. A lot of people were killed in the process, but then a hero arrived and managed to make the soldiers retreat by using a special weapon.</p>
<textarea class="Hide" disabled autocomplete="off" id="TextInput" placeholder="Type here..." ondrop="return false;" style="width: calc(100% - 16px); height: 200px; margin: 5px; resize: none; transition-property: opacity; transition-duration: 1s;"></textarea>
<script type="text/javascript">
var StartButton = document.getElementById("StartButton");
var InputElement = document.getElementById("TextInput");
var TitleElement = document.getElementById("TitleText");
var Background = document.getElementById("Background");
var MainAudio = document.getElementById("MainAudio");
var MainText = document.getElementById("MainText");
var Started = false;
var Running = false;
var Ended = false;

function Verify() {
    if (InputElement.value == MainText.innerHTML) {
        alert("You made it.");
    } else {
        alert("You failed.");
    }
}

function Initialize() {
    if (Started == false) {
        Started = true;
        var Items = document.getElementsByClassName("Hide");
        var Length = Items.length;
        for (let Index = 0; Index < Length; Index++) {
            var Item = Items[0];
            Item.classList.remove("Hide");
        }
        InputElement.onpaste = e => e.preventDefault();
        StartButton.remove();
        MainAudio.play();
    }
}

function CheckTime() {
    if (MainAudio.currentTime >= 3.6 && Running == false && Ended == false) {
        Running = true;
        InputElement.removeAttribute("disabled");
        InputElement.focus();
        TitleElement.style.color = "#FFFFFF";
        MainText.style.color = "#FFFFFF";
        InputElement.style.opacity = 0.8;
        Background.style.opacity = 1;
    } else if (MainAudio.currentTime >= 36.7 && Ended == false) {
        Running = false;
        Ended = true;
        InputElement.disabled = true;
        TitleElement.style.color = "#000000";
        MainText.style.color = "#000000";
        InputElement.style.opacity = 1;
        Background.style.opacity = 0;
        setTimeout(Verify, 4000);
    }
}

window.onkeydown = function(Key) {
    if (Key.keyCode == 13 && Started == false) {
        Initialize();
    }
}
</script>
</body>
</html>
